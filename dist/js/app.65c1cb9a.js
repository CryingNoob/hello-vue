(function(e){function t(t){for(var s,i,c=t[0],o=t[1],l=t[2],d=0,m=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&m.push(n[i][0]),n[i]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s]);u&&u(t);while(m.length)m.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],s=!0,c=1;c<a.length;c++){var o=a[c];0!==n[o]&&(s=!1)}s&&(r.splice(t--,1),e=i(i.s=a[0]))}return e}var s={},n={app:0},r=[];function i(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=s,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(a,s,function(t){return e[t]}.bind(null,s));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/hello-vue/dist/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=o;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var s=a("85ec"),n=a.n(s);n.a},"15cf":function(e,t,a){"use strict";var s=a("e174"),n=a.n(s);n.a},2887:function(e,t,a){"use strict";var s=a("6f0d"),n=a.n(s);n.a},"540d":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],i={name:"App",components:{}},c=i,o=(a("034f"),a("2877")),l=Object(o["a"])(c,n,r,!1,null,null,null),u=l.exports,d=a("8c4f"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"main"}},[a("header",[a("TopMenu")],1),a("div",{staticClass:"menu-card"},[a("router-view")],1),e.hassignin?a("div",{staticClass:"login",on:{click:e.cancelsignin}},[a("form",{staticClass:"loginform",on:{submit:function(t){return t.preventDefault(),e.signIn(t)},click:e.loginform}},[a("h2",[e._v("登录表单")]),a("div",{staticClass:"inputItem"},[a("label",{attrs:{for:"username"}},[e._v("username")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",id:"username"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),a("div",{staticClass:"inputItem"},[a("label",{attrs:{for:"password"}},[e._v("password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"text",id:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),a("button",[e._v("signin")]),a("p",[e._v("【username：“root”，password：“password”】")]),a("p",[e._v("【username：“one”，password：“one”】")]),a("p",[e._v("【username：“two”，password：“two”】")])])]):e._e(),e.hassignup?a("div",{staticClass:"login",on:{click:e.cancelsignup}},[a("form",{staticClass:"loginform",on:{submit:function(t){return t.preventDefault(),e.signUp(t)},click:e.loginform}},[a("h2",[e._v("注册表单(现不可用，未做数据持久化）")]),a("div",{staticClass:"inputItem"},[a("label",{attrs:{for:"username"}},[e._v("username")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",id:"username"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),a("div",{staticClass:"inputItem"},[a("label",{attrs:{for:"password"}},[e._v("password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"text",id:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),a("button",[e._v("signup")])])]):e._e()])},p=[],v=a("bc3a"),h=a.n(v),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"topmenu"},[a("router-link",{attrs:{to:{name:"index"}}},[a("div",{staticClass:"logo"},[e._v(" Async技术社区 ")])]),a("ul",{staticClass:"ul"},[a("router-link",{attrs:{to:{name:"index"}}},[a("li",{staticClass:"list"},[e._v(" 首页 ")])]),a("router-link",{attrs:{to:{name:"column"}}},[a("li",{staticClass:"list"},[e._v(" 专栏 ")])]),a("router-link",{attrs:{to:{name:"list3"}}},[a("li",{staticClass:"list"},[e._v(" LIST3 ")])])],1),a("div",{staticClass:"search"},[a("SearchBox")],1),e.haslogin?a("div",{staticClass:"user"},[a("div",{staticClass:"usericon"},[e._v(" "+e._s(this.$store.state.user.username)+" ")])]):a("div",{staticClass:"user"},[a("ul",[a("li",{staticClass:"list",on:{click:e.showsignup}},[e._v("免费注册")]),a("li",{staticClass:"list",on:{click:e.showsignin}},[e._v("立即登录")])])])],1)},_=[],g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"searchbox"},[a("div",{staticClass:"formbox"},[a("form",{staticClass:"myform",on:{submit:function(t){return t.preventDefault(),e.alertKeyWord(t)}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.keyword,expression:"keyword"}],attrs:{type:"text",placeholder:"搜索关键字"},domProps:{value:e.keyword},on:{input:function(t){t.target.composing||(e.keyword=t.target.value)}}}),a("button",[e._v("Search")])])])])},k=[],b={name:"SearchBox",data:function(){return{keyword:""}},methods:{alertKeyWord:function(){""!==this.keyword?alert(this.keyword):alert("请输入搜索关键字！")}}},w=b,y=(a("705a"),Object(o["a"])(w,g,k,!1,null,"62f1687a",null)),C=y.exports,x={name:"TopMenu",components:{SearchBox:C},data:function(){return{}},computed:{haslogin:function(){return this.$store.state.user.haslogin}},methods:{showsignin:function(){this.$store.commit("editsignin")},showsignup:function(){this.$store.commit("editsignup")}}},T=x,A=(a("f089"),Object(o["a"])(T,f,_,!1,null,"8b619544",null)),$=A.exports,O={name:"Main",components:{TopMenu:$},data:function(){return{username:"",password:""}},created:function(){var e=this;h.a.get("/article/articles").then((function(t){e.$store.commit("initialArticles",t.data)})).catch((function(e){console.log(e)}))},computed:{hassignin:function(){return this.$store.state.user.hassignin},hassignup:function(){return this.$store.state.user.hassignup}},methods:{loginform:function(e){e.stopPropagation()},cancelsignin:function(){this.$store.commit("editsignin"),this.username="",this.password=""},cancelsignup:function(){this.$store.commit("editsignup"),this.username="",this.password=""},signIn:function(){var e=this;h.a.post("/user/signin",{username:e.username,password:e.password}).then((function(t){if(console.log(t.data),t.data){var a={userid:t.data.userid,username:t.data.username,password:t.data.password};e.$store.commit("editlogin",a)}else alert("用户名或密码错误！");e.cancelsignin()})).catch((function(t){console.log(t),alert("登录失败！"),e.cancelsignin()}))}}},j=O,P=(a("9af4"),Object(o["a"])(j,m,p,!1,null,"5b5633a2",null)),I=P.exports,N=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},S=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"index"},[a("h1",[e._v("首页")])])}],E={name:"Index"},M=E,D=Object(o["a"])(M,N,S,!1,null,"ceb2106c",null),B=D.exports,L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"column"},[a("h1",{staticStyle:{"text-align":"center"}},[e._v("Column Component")]),e.haslogin?a("div",{staticClass:"addArticle"},[a("router-link",{attrs:{to:{name:"addarticle"}}},[e._v(" AddArticle ")])],1):e._e(),e._l(e.articles,(function(t,s){return a("div",{key:s,staticClass:"articleItem"},[a("div",{staticClass:"articleTitle",on:{click:function(t){return e.goColumnItem(s)}}},[e._v(" "+e._s(t.article_title)+" ")]),a("div",{staticClass:"articleAuthor"},[e._v(" author:"+e._s(t.article_author)+" ")]),a("div",{staticClass:"articleContent"},[e._v(" "+e._s(t.article_content)+" ")]),a("div",{class:{like:!0,liked:e.haslogin&&-1!=e.myliked.indexOf(t.article_id)},on:{click:function(a){return e.likeArticle(t.article_id,s)}}},[e._v(" "+e._s(t.like_number)+" ")])])}))],2)},J=[],R=(a("c975"),{name:"Column",data:function(){return{}},computed:{haslogin:function(){return this.$store.state.user.haslogin},myliked:function(){var e=this.$store.state.user.userid;return this.$store.getters.myLikedArticles(e)},articles:function(){return this.$store.state.article.articles}},methods:{goColumnItem:function(e){this.$router.push({name:"columnitem",params:{columnid:e}})},likeArticle:function(e,t){if(this.$store.state.user.haslogin){var a=!1;-1!=this.myliked.indexOf(e)&&(a=!0);var s={user:{userid:0,username:"root",password:"password"},index:t,article_id:e,isliked:a};this.$store.commit("likeArticle",s),console.log(this.$store.getters.myLikedArticles(0))}else alert("请先登录")}}}),U=R,K=(a("2887"),Object(o["a"])(U,L,J,!1,null,"4eaec5ce",null)),W=K.exports,F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"columnitem"},[a("div",{staticClass:"sidebar"},[e._v(" sidebar ")]),a("div",{staticClass:"articlebody"},[a("div",{staticClass:"author"},[a("div",{staticClass:"avatar"}),e._v(" AUTHOR:"+e._s(e.article.article_author)+" ")]),a("div",{staticClass:"title"},[a("h2",[e._v(e._s(e.article.article_title))])]),a("div",{staticClass:"annotation"},[a("div",{staticClass:"tags"},e._l(e.article.article_tag,(function(t,s){return a("div",{key:s,staticClass:"tagitem"},[e._v(" "+e._s(t.tag_name)+" ")])})),0),a("div",{staticClass:"date"},[e._v(" 发布于"+e._s(e.article.article_date.split("-")[1])+"月"+e._s(e.article.article_date.split("-")[2])+"日 ")])]),a("div",{staticClass:"content"},[a("p",[e._v(e._s(e.article.article_content))])]),a("div",{staticClass:"bottom"},[a("div",{staticClass:"item"},[e._v("赞"+e._s(e.article.like_number))]),a("div",{staticClass:"item"},[e._v("收藏"+e._s(e.article.collect_number))])])]),a("div",{staticClass:"comment"},[e._v(" 共有"+e._s(e.article.comment_number)+"条评论 "),e._l(e.article.comment_content,(function(t,s){return a("div",{key:s,staticClass:"commentitem"},[a("div",{staticClass:"username"},[e._v(e._s(t.username))]),a("div",{staticClass:"date"},[e._v("发布于"+e._s(t.comment_date))]),a("div",{staticClass:"content"},[e._v(" "+e._s(t.comment_content)+" ")])])}))],2)])},H=[],Y={name:"ColumnItem",computed:{article:function(){var e=this.$route.params.columnid;return this.$store.getters.getArticleByIndex(e)}}},q=Y,z=(a("15cf"),Object(o["a"])(q,F,H,!1,null,"e4b92562",null)),G=z.exports,Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addArticle"},[a("h1",[e._v("addArticle")]),a("form",{staticClass:"addform",on:{submit:function(t){return t.preventDefault(),e.addArticle(t)}}},[a("h2",[e._v("添加文章表单")]),a("div",{staticClass:"inputItem"},[a("label",{attrs:{for:"title"}},[e._v("title")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],attrs:{type:"text",id:"title"},domProps:{value:e.title},on:{input:function(t){t.target.composing||(e.title=t.target.value)}}})]),a("div",{staticClass:"inputItem"},[a("p",[e._v("选择标签")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedTags,expression:"checkedTags"}],attrs:{type:"checkbox",id:"前端",value:"0"},domProps:{checked:Array.isArray(e.checkedTags)?e._i(e.checkedTags,"0")>-1:e.checkedTags},on:{change:function(t){var a=e.checkedTags,s=t.target,n=!!s.checked;if(Array.isArray(a)){var r="0",i=e._i(a,r);s.checked?i<0&&(e.checkedTags=a.concat([r])):i>-1&&(e.checkedTags=a.slice(0,i).concat(a.slice(i+1)))}else e.checkedTags=n}}}),a("label",{attrs:{for:"前端"}},[e._v("前端")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedTags,expression:"checkedTags"}],attrs:{type:"checkbox",id:"html5",value:"1"},domProps:{checked:Array.isArray(e.checkedTags)?e._i(e.checkedTags,"1")>-1:e.checkedTags},on:{change:function(t){var a=e.checkedTags,s=t.target,n=!!s.checked;if(Array.isArray(a)){var r="1",i=e._i(a,r);s.checked?i<0&&(e.checkedTags=a.concat([r])):i>-1&&(e.checkedTags=a.slice(0,i).concat(a.slice(i+1)))}else e.checkedTags=n}}}),a("label",{attrs:{for:"html5"}},[e._v("html5")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedTags,expression:"checkedTags"}],attrs:{type:"checkbox",id:"css3",value:"2"},domProps:{checked:Array.isArray(e.checkedTags)?e._i(e.checkedTags,"2")>-1:e.checkedTags},on:{change:function(t){var a=e.checkedTags,s=t.target,n=!!s.checked;if(Array.isArray(a)){var r="2",i=e._i(a,r);s.checked?i<0&&(e.checkedTags=a.concat([r])):i>-1&&(e.checkedTags=a.slice(0,i).concat(a.slice(i+1)))}else e.checkedTags=n}}}),a("label",{attrs:{for:"css3"}},[e._v("css3")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedTags,expression:"checkedTags"}],attrs:{type:"checkbox",id:"vue",value:"3"},domProps:{checked:Array.isArray(e.checkedTags)?e._i(e.checkedTags,"3")>-1:e.checkedTags},on:{change:function(t){var a=e.checkedTags,s=t.target,n=!!s.checked;if(Array.isArray(a)){var r="3",i=e._i(a,r);s.checked?i<0&&(e.checkedTags=a.concat([r])):i>-1&&(e.checkedTags=a.slice(0,i).concat(a.slice(i+1)))}else e.checkedTags=n}}}),a("label",{attrs:{for:"vue"}},[e._v("vue")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedTags,expression:"checkedTags"}],attrs:{type:"checkbox",id:"react",value:"4"},domProps:{checked:Array.isArray(e.checkedTags)?e._i(e.checkedTags,"4")>-1:e.checkedTags},on:{change:function(t){var a=e.checkedTags,s=t.target,n=!!s.checked;if(Array.isArray(a)){var r="4",i=e._i(a,r);s.checked?i<0&&(e.checkedTags=a.concat([r])):i>-1&&(e.checkedTags=a.slice(0,i).concat(a.slice(i+1)))}else e.checkedTags=n}}}),a("label",{attrs:{for:"react"}},[e._v("react")])]),a("div",{staticClass:"inputItem"},[a("label",{attrs:{for:"content"}},[e._v("Content")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],attrs:{type:"text",id:"content",placeholder:"Add Article Content"},domProps:{value:e.content},on:{input:function(t){t.target.composing||(e.content=t.target.value)}}})]),a("button",[e._v("提交")])]),e._v(" "+e._s(e.title)+" "+e._s(e.checkedTags)+" "+e._s(e.content)+" ")])},V=[],X=[];X.push({tag_id:0,tag_name:"前端"}),X.push({tag_id:1,tag_name:"html5"}),X.push({tag_id:2,tag_name:"css3"}),X.push({tag_id:3,tag_name:"vue"}),X.push({tag_id:4,tag_name:"react"});var Z=X,ee={name:"AddArticle",data:function(){return{title:"",checkedTags:[],content:""}},methods:{addArticle:function(){for(var e=this.$store.getters.getArticleNum+1,t=this.$store.state.user.username,a=[],s=0;s<this.checkedTags.length;s++){var n=parseInt(this.checkedTags[s]);a.push(Z[n])}var r={article_id:e,article_title:this.title,article_author:t,article_tag:a,article_date:(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate(),article_content:this.content,like_number:0,like_users:[],comment_number:0,comment_content:[],collect_number:0};this.$store.commit("addArticle",r),this.$store.getters.getArticleNum==e?alert("文章提交成功！"):alert("文章提交失败！"),this.$router.push({name:"column"})}}},te=ee,ae=Object(o["a"])(te,Q,V,!1,null,"9bdd80f2",null),se=ae.exports,ne=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},re=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c"},[a("h1",[e._v("C")])])}],ie={name:"C"},ce=ie,oe=Object(o["a"])(ce,ne,re,!1,null,"6ea05b0b",null),le=oe.exports;s["a"].use(d["a"]);for(var ue=new d["a"]({routes:[{path:"/",redirect:"/main/index"},{path:"/main",component:I,children:[{path:"index",name:"index",component:B},{path:"column",name:"column",component:W},{path:"column/columnid=:columnid",name:"columnitem",component:G},{path:"column/addarticle",name:"addarticle",component:se},{path:"list3",name:"list3",component:le}]}]}),de=a("96eb"),me=a.n(de),pe=me.a.Random,ve=[],he=0;he<8;he++){var fe={info:pe.sentence(5,6)};ve.push(fe)}var _e=ve,ge=[];ge.push({userid:0,username:"root",password:"password"}),ge.push({userid:1,username:"one",password:"one"}),ge.push({userid:2,username:"two",password:"two"});for(var ke=ge,be=me.a.Random,we=[],ye=1;ye<=10;ye++){var Ce={article_id:ye,article_title:"第"+ye+"篇专栏文章",article_author:ke[0].username,article_tag:[Z[0],Z[2]],article_date:be.date(),article_content:be.csentence(200,500),like_number:3,like_users:[ke[0],ke[1],ke[2]],comment_number:2,comment_content:[{comment_id:1,comment_content:be.csentence(10,20),userid:ke[0].userid,username:ke[0].username,comment_date:be.date()},{comment_id:2,comment_content:be.csentence(20,30),userid:ke[1].userid,username:ke[1].username,comment_date:be.date()}],collect_number:be.natural(0,5)};we.push(Ce)}for(var xe=11;xe<=20;xe++){var Te={article_id:xe,article_title:"第"+xe+"篇专栏文章",article_author:ke[1].username,article_tag:[Z[xe%2],Z[xe%3]],article_date:be.date(),article_content:be.csentence(200,500),like_number:1,like_users:[ke[2]],comment_number:1,comment_content:[{comment_id:1,comment_content:be.csentence(10,20),userid:ke[2].userid,username:ke[2].username,comment_date:be.date()}],collect_number:be.natural(0,5)};we.push(Te)}var Ae=we,$e="http://mockjs.com/api";me.a.mock("".concat($e,"/boardlist"),"get",_e),me.a.mock("".concat($e,"/user/signin"),"post",(function(e){for(var t=JSON.parse(e.body).username,a=JSON.parse(e.body).password,s={},n=0;n<ke.length;n++){var r=ke[n];r.username==t&&r.password==a&&(s=ke[n])}return s})),me.a.mock("".concat($e,"/article/articles"),"get",Ae);a("ed2c");var Oe=a("2f62"),je=(a("99af"),a("a434"),a("2909")),Pe={state:{articles:[]},getters:{myLikedArticles:function(e){return function(t){for(var a=[],s=0;s<e.articles.length;s++)for(var n=0;n<e.articles[s].like_users.length;n++)if(e.articles[s].like_users[n].userid==t){a.push(e.articles[s].article_id);break}return a}},getArticleByIndex:function(e){return function(t){return console.log(e.articles[t]),e.articles[t]}},getArticleNum:function(e){return e.articles.length}},mutations:{initialArticles:function(e,t){e.articles=Object(je["a"])(t)},likeArticle:function(e,t){if(console.log(t),t.isliked){e.articles[t.index].like_number--;for(var a=0;a<e.articles[t.index].like_users.length;a++)if(e.articles[t.index].like_users[a].userid==t.user.userid){e.articles[t.index].like_users.splice(a,1);break}}else e.articles[t.index].like_number++,e.articles[t.index].like_users.push(t.user)},addArticle:function(e,t){e.articles=[].concat(Object(je["a"])(e.articles),[t])}}},Ie=Pe,Ne={state:{haslogin:!1,hassignin:!1,hassignup:!1,avatar:"",userid:0,username:"",password:""},mutations:{editlogin:function(e,t){e.haslogin=!0,e.userid=t.userid,e.username=t.username,e.password=t.password},editsignin:function(e){e.hassignin=!e.hassignin},editsignup:function(e){e.hassignup=!e.hassignup}}},Se=Ne;s["a"].use(Oe["a"]);var Ee=new Oe["a"].Store({modules:{article:Ie,user:Se}}),Me=Ee;h.a.defaults.baseURL="http://mockjs.com/api",s["a"].config.productionTip=!1,new s["a"]({router:ue,store:Me,render:function(e){return e(u)}}).$mount("#app")},"6f0d":function(e,t,a){},"705a":function(e,t,a){"use strict";var s=a("bff3"),n=a.n(s);n.a},"85ec":function(e,t,a){},"9af4":function(e,t,a){"use strict";var s=a("540d"),n=a.n(s);n.a},b4a2:function(e,t,a){},bff3:function(e,t,a){},e174:function(e,t,a){},ed2c:function(e,t,a){},f089:function(e,t,a){"use strict";var s=a("b4a2"),n=a.n(s);n.a}});
//# sourceMappingURL=app.65c1cb9a.js.map